<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text-to-Speech ResponsiveVoice</title>
    <script src="https://code.responsivevoice.org/responsivevoice.js"></script>
</head>
<body>
    <h1>Озвучка текста</h1>

    <!-- Основной текст -->
    <textarea id="textToSpeak" rows="30" cols="50" placeholder="Введите текст для озвучки..."></textarea><br>

    <!-- Поле для отображения текущих слов с переносом текста -->
    <textarea id="currentText" rows="10" cols="50" readonly></textarea><br><br>

    <!-- Инпут для выбора количества слов -->
    <label for="wordCount">Количество слов за раз:</label>
    <input type="number" id="wordCount" min="1" value="50"><br><br>

    <!-- Выпадающий список для выбора голоса -->
    <label for="voiceselection">Выберите голос:</label>
    <select id="voiceselection" class="input input--dropdown js--animations">
        <option value="Russian Female">Russian Female</option>
        <option value="Russian Male">Russian Male</option>
        <option value="UK English Female">UK English Female</option>
        <option value="UK English Male">UK English Male</option>
        <option value="US English Female">US English Female</option>
        <option value="US English Male">US English Male</option>
        <option value="Polish Male">Polish Male</option>
        <option value="Polish Female">Polish Female</option>
        <option value="Romanian Female">Romanian Female</option>
        <option value="Slovak Female">Slovak Female</option>
        <option value="Ukrainian Female">Ukrainian Female</option>
        <option value="Serbo-Croatian Male">Serbo-Croatian Male</option>
        <option value="Bosnian Male">Bosnian Male</option>
    </select><br><br>

    <button onclick="speakNext()">Озвучить следующие слова</button>

    <script>
        let currentIndex = 0;

        function speakNext() {
            const text = document.getElementById('textToSpeak').value;
            const voice = document.getElementById('voiceselection').value;
            const wordCount = parseInt(document.getElementById('wordCount').value);

            // Разделяем текст на слова
            const words = text.split(/\s+/);

            if (currentIndex >= words.length) {
                alert("Конец текста.");
                return;
            }

            // Берем следующие несколько слов
            const nextWords = words.slice(currentIndex, currentIndex + wordCount);
            const textToSpeak = nextWords.join(' ');

            // Обновляем поле текущего текста
            document.getElementById('currentText').value = textToSpeak;

            // Озвучиваем текст
            responsiveVoice.speak(textToSpeak, voice, {
                onend: () => currentIndex += wordCount
            });
        }
    </script>
</body>
</html>
